<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C.O.M.</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#9670;</text></svg>">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;1,400&family=JetBrains+Mono:wght@300;400&display=swap');

        :root {
            /* Colors */
            --black: #0a0a0a;
            --dark: #111;
            --gray: #1a1a1a;
            --text: #e0e0e0;
            --dim: #888;
            --accent: #d4af37;
            --white: #f5f5f5;

            /* Typography Scale (Major Third 1.25) */
            --size-display: 4rem;      /* 64px - Sigils, dramatic icons */
            --size-h1: 2rem;           /* 32px - Big reveals */
            --size-h2: 1.5rem;         /* 24px - Titles, questions */
            --size-lg: 1.125rem;       /* 18px - Emphasis text */
            --size-base: 1rem;         /* 16px - Body text */
            --size-sm: 0.875rem;       /* 14px - Secondary text */
            --size-xs: 0.75rem;        /* 12px - Buttons, captions */
            --size-2xs: 0.7rem;        /* 11.2px - Metadata (minimum) */

            /* Letter Spacing (Powers of 2) */
            --ls-tight: 1px;
            --ls-normal: 2px;
            --ls-wide: 4px;
            --ls-dramatic: 8px;

            /* Line Heights */
            --lh-compact: 1.5;
            --lh-normal: 1.7;
            --lh-relaxed: 1.9;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        ::selection {
            background: var(--accent);
            color: var(--black);
        }

        body {
            font-family: 'EB Garamond', serif;
            background: var(--black);
            color: var(--text);
            min-height: 100vh;
            line-height: var(--lh-normal);
        }

        .hidden { display: none !important; }

        /* === CICADA AESTHETIC === */
        .phase {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            position: relative;
        }

        /* Scanlines overlay */
        .phase::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0,0,0,0.1) 0px,
                rgba(0,0,0,0.1) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
            z-index: 1000;
        }

        /* === PHASE 1: THE SIGIL (Mystery Box) === */
        #phase-sigil {
            cursor: pointer;
        }

        .sigil-container {
            text-align: center;
            max-width: 600px;
        }

        .sigil {
            font-size: var(--size-display);
            color: var(--accent);
            margin-bottom: 40px;
            animation: breathe 4s ease-in-out infinite;
            filter: drop-shadow(0 0 30px rgba(212, 175, 55, 0.3));
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
        }

        .epigraph {
            font-size: var(--size-lg);
            font-style: italic;
            color: var(--text);
            margin-bottom: 30px;
            letter-spacing: var(--ls-tight);
        }

        .scramble-text {
            display: inline;
        }

        .scramble-char {
            display: inline-block;
            min-width: 0.5em;
        }

        .scramble-char.scrambling {
            color: var(--accent);
            opacity: 0.7;
        }

        .epigraph-source {
            font-size: var(--size-sm);
            color: var(--dim);
            margin-top: 10px;
            font-style: normal;
        }

        .instruction {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--accent);
            letter-spacing: var(--ls-wide);
            margin-top: 50px;
            opacity: 0.8;
        }

        /* === PHASE 1.5: APOHORIA BRIEFING === */
        .briefing-container {
            max-width: 550px;
            text-align: center;
        }

        .briefing-text {
            font-size: var(--size-lg);
            color: var(--dim);
            margin-bottom: 25px;
        }

        .briefing-formula {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-lg);
            color: var(--accent);
            letter-spacing: var(--ls-normal);
            margin-bottom: 40px;
        }

        /* === PHASE 2: THE TEST (Self-Selection + Commitment) === */
        #phase-test {
            background: var(--black);
        }

        .test-container {
            max-width: 500px;
            text-align: center;
        }

        .test-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-2xs);
            color: var(--dim);
            letter-spacing: var(--ls-wide);
            margin-bottom: 40px;
        }

        .test-question {
            font-size: var(--size-h2);
            color: var(--white);
            margin-bottom: 15px;
            font-weight: 400;
        }

        .test-hint {
            font-size: var(--size-sm);
            color: var(--dim);
            font-style: italic;
            margin-bottom: 40px;
        }

        .cipher-display {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-lg);
            color: var(--accent);
            letter-spacing: var(--ls-dramatic);
            padding: 25px;
            background: var(--dark);
            border: 1px solid var(--gray);
            margin-bottom: 30px;
            user-select: all;
        }

        .input-container {
            position: relative;
            margin-bottom: 20px;
        }

        .answer-input {
            width: 100%;
            padding: 15px 20px;
            background: transparent;
            border: 1px solid var(--gray);
            color: var(--white);
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-base);
            text-align: center;
            letter-spacing: var(--ls-normal);
            outline: none;
            transition: border-color 0.3s;
        }

        .answer-input:focus {
            border-color: var(--accent);
        }

        .answer-input::placeholder {
            color: var(--dim);
        }

        .submit-btn {
            padding: 12px 40px;
            background: transparent;
            border: 1px solid var(--dim);
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            letter-spacing: var(--ls-wide);
            cursor: pointer;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--black);
        }

        .feedback {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            margin-top: 20px;
            height: 20px;
        }

        .feedback.error { color: #8b0000; }
        .feedback.partial { color: var(--accent); }

        .hint-section {
            margin-top: 35px;
            padding-top: 25px;
            border-top: 1px solid var(--gray);
        }

        .hint-readme-popup {
            margin-bottom: 20px;
        }

        .readme-box {
            background: var(--dark);
            border: 1px solid var(--gray);
            padding: 25px;
            text-align: center;
        }

        .readme-title {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--accent);
            letter-spacing: var(--ls-normal);
            margin-bottom: 15px;
        }

        .readme-text {
            display: block;
            font-size: var(--size-sm);
            color: var(--text);
            margin-bottom: 15px;
            line-height: var(--lh-compact);
        }

        .readme-warning {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: #cc4444;
            margin-bottom: 20px;
            letter-spacing: var(--ls-tight);
        }

        .readme-btn {
            padding: 10px 30px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            letter-spacing: var(--ls-tight);
            cursor: pointer;
            transition: all 0.3s;
        }

        .readme-btn:hover {
            background: var(--accent);
            color: var(--black);
        }

        .hint-prompt {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            opacity: 0.6;
            transition: opacity 0.3s;
        }

        .hint-prompt:hover {
            opacity: 1;
        }

        .hint-prompt.attention {
            animation: hintPulse 2s ease-in-out infinite;
        }

        @keyframes hintPulse {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
        }

        .hint-icon {
            color: var(--accent);
            font-size: var(--size-base);
        }

        .hint-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--dim);
            letter-spacing: var(--ls-tight);
        }

        .hint-revealed {
            text-align: center;
        }

        .hint-label {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-2xs);
            color: var(--accent);
            letter-spacing: var(--ls-normal);
            margin-bottom: 10px;
        }

        .hint-content {
            display: block;
            font-style: italic;
            color: var(--text);
            font-size: var(--size-base);
        }

        .hint-prompt-2 {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--gray);
        }

        .hint-audio {
            margin-top: 20px;
            text-align: center;
        }

        .audio-player {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            padding: 15px 20px;
            background: var(--dark);
            border: 1px solid var(--gray);
        }

        .play-btn {
            width: 40px;
            height: 40px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-size: var(--size-base);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .play-btn:hover {
            background: var(--accent);
            color: var(--black);
        }

        .audio-progress {
            flex: 1;
            max-width: 200px;
            height: 4px;
            background: var(--gray);
            cursor: pointer;
        }

        .audio-bar {
            height: 100%;
            width: 0%;
            background: var(--accent);
            transition: width 0.1s;
        }

        .audio-time {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--dim);
            min-width: 35px;
        }

        .hint-prompt-3 {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--gray);
        }

        .hint-prompt-3 .hint-text {
            color: #8b4444;
        }

        .hint-confirm {
            margin-top: 20px;
        }

        .confirm-box {
            background: var(--dark);
            border: 1px solid #3d0000;
            padding: 25px;
            text-align: center;
        }

        .confirm-title {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: #8b0000;
            letter-spacing: var(--ls-normal);
            margin-bottom: 15px;
        }

        .confirm-text {
            display: block;
            font-size: var(--size-sm);
            color: var(--text);
            margin-bottom: 20px;
            line-height: var(--lh-compact);
        }

        .confirm-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .confirm-btn {
            padding: 10px 25px;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            letter-spacing: var(--ls-tight);
            cursor: pointer;
            transition: all 0.3s;
        }

        .confirm-btn.cancel {
            background: transparent;
            border: 1px solid var(--dim);
            color: var(--text);
        }

        .confirm-btn.cancel:hover {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--black);
        }

        .confirm-btn.forfeit {
            background: transparent;
            border: 1px solid #8b0000;
            color: #8b4444;
        }

        .confirm-btn.forfeit:hover {
            background: #8b0000;
            color: var(--white);
        }

        .hint-forfeited {
            text-align: center;
            padding: 30px;
            background: rgba(139, 0, 0, 0.1);
            border: 1px solid #3d0000;
        }

        .forfeit-label {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-sm);
            color: #8b0000;
            letter-spacing: var(--ls-wide);
            margin-bottom: 15px;
        }

        .forfeit-answer {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-lg);
            color: var(--dim);
            margin-bottom: 15px;
        }

        .forfeit-text {
            display: block;
            font-style: italic;
            color: #8b4444;
            font-size: var(--size-sm);
        }

        /* === PHASE 3: THE REVELATION (Information Gap + Authority) === */
        #phase-reveal {
            background: var(--black);
        }

        .reveal-container {
            max-width: 600px;
            text-align: center;
        }

        .reveal-sigil {
            font-size: var(--size-h1);
            color: var(--accent);
            margin-bottom: 30px;
        }

        .reveal-title {
            font-size: var(--size-h2);
            color: var(--white);
            margin-bottom: 20px;
            font-weight: 400;
        }

        .reveal-text {
            font-size: var(--size-base);
            color: var(--text);
            margin-bottom: 15px;
            line-height: var(--lh-relaxed);
        }

        .reveal-quote {
            font-style: italic;
            color: var(--dim);
            padding: 20px 30px;
            border-left: 1px solid var(--accent);
            margin: 30px 0;
            text-align: left;
        }

        .classified-block {
            background: var(--dark);
            border: 1px solid var(--gray);
            padding: 25px;
            margin: 30px 0;
            text-align: left;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-sm);
        }

        .classified-line {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--gray);
        }

        .classified-line:last-child { border-bottom: none; }

        .classified-key { color: var(--dim); }
        .classified-val { color: var(--text); }
        .classified-val.gold { color: var(--accent); }
        .classified-val.redacted {
            color: var(--dim);
            text-decoration: line-through;
        }

        .continue-btn {
            display: inline-block;
            margin-top: 30px;
            padding: 15px 50px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            letter-spacing: var(--ls-wide);
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s;
        }

        .continue-btn:hover {
            background: var(--accent);
            color: var(--black);
        }

        /* === PHASE 4: THE CHANNEL (Endowment + Loss Aversion) === */
        #phase-channel {
            background: var(--black);
        }

        .channel-container {
            max-width: 550px;
            text-align: center;
        }

        .channel-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-2xs);
            color: var(--dim);
            letter-spacing: var(--ls-wide);
            margin-bottom: 30px;
        }

        .channel-sigil {
            font-size: var(--size-h1);
            color: var(--accent);
            margin-bottom: 20px;
        }

        .channel-title {
            font-size: var(--size-h2);
            color: var(--white);
            margin-bottom: 15px;
        }

        .channel-text {
            font-size: var(--size-base);
            color: var(--text);
            margin-bottom: 25px;
            line-height: var(--lh-normal);
        }

        .warning-box {
            background: rgba(139, 0, 0, 0.1);
            border: 1px solid #3d0000;
            padding: 15px 20px;
            margin: 25px 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: #8b4444;
        }

        .token-display {
            background: var(--dark);
            border: 1px solid var(--accent);
            padding: 20px;
            margin: 25px 0;
            font-family: 'JetBrains Mono', monospace;
        }

        .token-label {
            font-size: var(--size-2xs);
            color: var(--dim);
            letter-spacing: var(--ls-normal);
            margin-bottom: 10px;
        }

        .token-value {
            font-size: var(--size-lg);
            color: var(--accent);
            letter-spacing: var(--ls-wide);
            word-break: break-all;
        }

        .token-copy {
            font-size: var(--size-2xs);
            color: var(--dim);
            letter-spacing: var(--ls-tight);
            margin-top: 12px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .token-copy:hover {
            color: var(--accent);
        }

        .token-copy.copied {
            color: var(--accent);
        }

        .telegram-link {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: var(--accent);
            color: var(--black);
            padding: 15px 40px;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-sm);
            font-weight: 500;
            letter-spacing: var(--ls-normal);
            text-decoration: none;
            transition: all 0.3s;
        }

        .telegram-link:hover {
            filter: brightness(1.1);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.2);
        }

        .profile-container {
            max-width: 450px;
            text-align: center;
        }

        .profile-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-sm);
            color: var(--accent);
            letter-spacing: var(--ls-wide);
            margin-bottom: 10px;
        }

        .profile-subheader {
            font-size: var(--size-lg);
            color: var(--text);
            margin-bottom: 30px;
            font-style: italic;
        }

        .profile-grid {
            background: var(--dark);
            border: 1px solid var(--gray);
            padding: 20px;
            margin-bottom: 25px;
            text-align: left;
        }

        .profile-line {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--gray);
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
        }

        .profile-line:last-child {
            border-bottom: none;
        }

        .profile-key {
            color: var(--dim);
            letter-spacing: var(--ls-tight);
        }

        .profile-val {
            color: var(--text);
        }

        .profile-intro {
            text-align: center;
            margin-bottom: 25px;
        }

        .profile-intro p {
            font-size: var(--size-base);
            color: var(--text);
            margin-bottom: 10px;
            line-height: var(--lh-compact);
        }

        .profile-intro .accent-text {
            color: var(--accent);
            font-weight: 500;
        }

        .profile-reassure {
            font-size: var(--size-base) !important;
            color: var(--text) !important;
            font-style: italic;
            margin-top: 15px !important;
        }

        .gold-text {
            color: var(--accent);
        }

        /* === CALIBRATION (Mentalist) === */
        .calibration-container {
            max-width: 550px;
            text-align: center;
        }

        .calibration-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-sm);
            color: var(--accent);
            letter-spacing: var(--ls-wide);
            margin-bottom: 10px;
        }

        .calibration-subheader {
            font-size: var(--size-base);
            color: var(--dim);
            margin-bottom: 40px;
        }

        .calibration-step {
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .cal-question {
            font-size: var(--size-lg);
            color: var(--text);
            margin-bottom: 30px;
            line-height: var(--lh-compact);
        }

        .cal-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .cal-option {
            padding: 15px 25px;
            background: transparent;
            border: 1px solid var(--gray);
            color: var(--text);
            font-family: 'EB Garamond', serif;
            font-size: var(--size-base);
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .cal-option:hover {
            border-color: var(--accent);
            background: rgba(212, 175, 55, 0.05);
        }

        .cal-option.selected {
            border-color: var(--accent);
            background: rgba(212, 175, 55, 0.1);
            color: var(--accent);
        }

        .reading-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--accent);
            letter-spacing: var(--ls-wide);
            margin-bottom: 30px;
        }

        .reading-content {
            text-align: left;
            background: var(--dark);
            border: 1px solid var(--gray);
            padding: 30px;
            margin-bottom: 30px;
        }

        .reading-line {
            font-size: var(--size-base);
            color: var(--text);
            margin-bottom: 20px;
            line-height: var(--lh-normal);
            opacity: 0;
            animation: readingFade 0.8s ease forwards;
        }

        .reading-line:nth-child(1) { animation-delay: 0.5s; }
        .reading-line:nth-child(2) { animation-delay: 1.5s; }
        .reading-line:nth-child(3) { animation-delay: 2.5s; }
        .reading-line:nth-child(4) { animation-delay: 3.5s; }

        @keyframes readingFade {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .word-challenge-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--accent);
            letter-spacing: var(--ls-wide);
            margin-bottom: 30px;
        }

        .word-challenge-text {
            font-size: var(--size-lg);
            color: var(--text);
            line-height: var(--lh-relaxed);
            margin-bottom: 40px;
        }

        .word-challenge-text p {
            margin-bottom: 15px;
        }

        .word-highlight {
            color: var(--accent);
            font-weight: 500;
        }

        .reveal-dramatic {
            padding: 40px;
            background: var(--dark);
            border: 1px solid var(--accent);
            margin-bottom: 30px;
        }

        .reveal-text {
            font-size: var(--size-base);
            color: var(--dim);
            margin-bottom: 20px;
        }

        .reveal-word {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-h1);
            color: var(--accent);
            letter-spacing: var(--ls-dramatic);
            animation: revealPulse 2s ease-in-out infinite;
        }

        @keyframes revealPulse {
            0%, 100% { text-shadow: 0 0 20px rgba(212, 175, 55, 0.3); }
            50% { text-shadow: 0 0 40px rgba(212, 175, 55, 0.6); }
        }

        .reveal-sub {
            font-size: var(--size-sm);
            color: var(--dim);
            margin-top: 20px;
            font-style: italic;
        }

        .word-input {
            width: 100%;
            padding: 20px;
            background: var(--black);
            border: 1px solid var(--gray);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-h2);
            text-align: center;
            text-transform: uppercase;
            letter-spacing: var(--ls-wide);
            outline: none;
            margin: 20px 0;
        }

        .word-input:focus {
            border-color: var(--accent);
        }

        .word-input::placeholder {
            color: var(--dim);
            letter-spacing: var(--ls-wide);
        }

        .reveal-result {
            padding: 40px;
            text-align: center;
            animation: fadeInUp 0.5s ease;
        }

        .result-word {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-h1);
            color: var(--accent);
            letter-spacing: var(--ls-dramatic);
            margin-bottom: 20px;
        }

        .result-text {
            font-size: var(--size-lg);
            color: var(--text);
            margin-bottom: 30px;
        }

        .result-fail-icon {
            font-size: var(--size-display);
            color: #8b0000;
            margin-bottom: 20px;
        }

        .result-fail-text {
            font-size: var(--size-lg);
            color: #cc4444;
            margin-bottom: 15px;
        }

        .result-fail-sub {
            font-size: var(--size-base);
            color: var(--dim);
        }

        .profile-progress-section {
            margin-top: 30px;
            padding: 25px;
            background: var(--dark);
            border: 1px solid var(--gray);
        }

        .progress-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-2xs);
            color: var(--accent);
            letter-spacing: var(--ls-normal);
            margin-bottom: 15px;
            text-align: center;
        }

        .progress-bar-container {
            width: 100%;
            height: 6px;
            background: var(--black);
            border: 1px solid var(--gray);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--accent), #f0d078);
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .progress-message {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--text);
            text-align: center;
            min-height: 40px;
            line-height: var(--lh-compact);
        }

        .progress-message .typing-cursor {
            display: inline-block;
            width: 2px;
            height: 12px;
            background: var(--accent);
            margin-left: 2px;
            animation: cursorBlink 0.8s infinite;
            vertical-align: middle;
        }

        @keyframes cursorBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .profile-warning {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: #cc4444;
            margin-bottom: 30px;
            line-height: var(--lh-compact);
        }

        .deployment-container {
            max-width: 500px;
            text-align: center;
        }

        .deployment-sigil {
            font-size: var(--size-h1);
            color: var(--accent);
            margin-bottom: 30px;
            animation: breathe 4s ease-in-out infinite;
        }

        .deployment-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--accent);
            letter-spacing: var(--ls-wide);
            margin-bottom: 25px;
        }

        .deployment-text {
            font-size: var(--size-base);
            color: var(--text);
            line-height: var(--lh-relaxed);
            margin-bottom: 25px;
        }

        .deployment-divider {
            width: 60px;
            height: 1px;
            background: var(--gray);
            margin: 0 auto 25px;
        }

        .deployment-classified {
            font-style: italic;
            color: var(--accent);
            font-size: var(--size-base);
            margin-bottom: 30px;
        }

        .deployment-warning {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 15px 20px;
            background: rgba(139, 68, 68, 0.1);
            border: 1px solid rgba(139, 68, 68, 0.3);
            margin-bottom: 20px;
        }

        .deployment-timer {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-lg);
            color: #cc4444;
            font-weight: 500;
        }

        .deployment-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-2xs);
            color: var(--dim);
            letter-spacing: var(--ls-tight);
        }

        .deployment-note {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--dim);
            line-height: var(--lh-relaxed);
            margin-bottom: 25px;
        }

        .deployment-final {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-sm);
            color: var(--white);
            letter-spacing: var(--ls-normal);
            margin-bottom: 35px;
        }

        .deployment-faq {
            margin: 40px 0;
            text-align: left;
        }

        .faq-item {
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid var(--gray);
        }

        .faq-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .faq-question {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-sm);
            color: var(--dim);
            margin-bottom: 10px;
        }

        .faq-answer {
            font-size: var(--size-base);
            color: var(--text);
            line-height: var(--lh-compact);
        }

        .faq-reward {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--gray);
        }

        .reward-text {
            font-size: var(--size-sm);
            color: var(--dim);
            line-height: var(--lh-compact);
            margin-bottom: 15px;
        }

        .share-btn {
            padding: 12px 30px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            letter-spacing: var(--ls-normal);
            cursor: pointer;
            transition: all 0.3s;
        }

        .share-btn:hover {
            background: var(--accent);
            color: var(--black);
        }

        .share-confirmation {
            margin-top: 15px;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--accent);
            letter-spacing: var(--ls-tight);
        }

        .footer-runes {
            margin-top: 50px;
            font-size: var(--size-lg);
            color: var(--dim);
            letter-spacing: var(--ls-dramatic);
            opacity: 0.3;
        }

        /* === DEPLOYMENT STAGES === */
        .deploy-stage {
            display: none;
            opacity: 0;
        }

        .deploy-stage.active {
            display: block;
            animation: deployFadeIn 1s ease-out forwards;
        }

        @keyframes deployFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .deploy-timer-only {
            font-family: 'JetBrains Mono', monospace;
            font-size: 4rem;
            color: #8b0000;
            letter-spacing: 8px;
            text-shadow: 0 0 30px rgba(139, 0, 0, 0.5);
        }

        .deploy-timer-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6rem;
            color: var(--dim);
            letter-spacing: 3px;
            margin-top: 20px;
            opacity: 0;
            animation: deployFadeInSlow 2s ease-out 3s forwards;
        }

        @keyframes deployFadeInSlow {
            to { opacity: 1; }
        }

        .deploy-revelation {
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .deploy-rev-line {
            font-size: 1.4rem;
            color: var(--text);
            line-height: 2;
            opacity: 0;
            margin: 15px 0;
        }

        .deploy-rev-line.visible {
            animation: deployRevealLine 0.8s ease-out forwards;
        }

        @keyframes deployRevealLine {
            from { opacity: 0; transform: translateY(10px); filter: blur(4px); }
            to { opacity: 1; transform: translateY(0); filter: blur(0); }
        }

        .deploy-rev-line.accent {
            color: var(--accent);
            font-style: italic;
        }

        .deploy-rev-line.warning {
            color: #8b0000;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            letter-spacing: 2px;
        }

        .deploy-sigil-stage {
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .deploy-sigil-icon {
            font-size: 6rem;
            color: var(--accent);
            opacity: 0;
            animation: deploySigilEmerge 3s ease-out forwards;
            filter: drop-shadow(0 0 50px rgba(212, 175, 55, 0.4));
        }

        @keyframes deploySigilEmerge {
            0% { opacity: 0; transform: scale(0.5); filter: blur(20px); }
            50% { opacity: 0.5; transform: scale(1.1); }
            100% { opacity: 1; transform: scale(1); filter: blur(0) drop-shadow(0 0 50px rgba(212, 175, 55, 0.4)); }
        }

        .deploy-sigil-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--accent);
            letter-spacing: 4px;
            margin-top: 30px;
            opacity: 0;
            animation: deployFadeInSlow 1s ease-out 2s forwards;
        }

        .deploy-protocol {
            text-align: left;
            max-width: 500px;
        }

        .deploy-protocol-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            color: var(--accent);
            letter-spacing: 3px;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray);
        }

        .deploy-protocol-item {
            padding: 20px 0;
            border-bottom: 1px solid var(--gray);
            opacity: 0;
            cursor: pointer;
        }

        .deploy-protocol-item.visible {
            animation: deployRevealLine 0.6s ease-out forwards;
        }

        .deploy-protocol-item:hover {
            background: rgba(212, 175, 55, 0.03);
        }

        .deploy-protocol-q {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--dim);
            margin-bottom: 10px;
        }

        .deploy-protocol-a {
            font-size: 1rem;
            color: var(--text);
            line-height: 1.6;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
        }

        .deploy-protocol-item.expanded .deploy-protocol-a {
            max-height: 300px;
            padding-top: 10px;
        }

        .deploy-protocol-special {
            margin-top: 15px;
            padding: 20px;
            background: var(--dark);
            border: 1px solid var(--gray);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            line-height: 1.8;
        }

        .deploy-protocol-special strong {
            color: var(--accent);
            display: block;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .deploy-gateway {
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .deploy-gateway-warning {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: #8b0000;
            letter-spacing: 2px;
            margin-bottom: 40px;
            opacity: 0;
            animation: deployFadeInSlow 1s ease-out forwards;
        }

        .deploy-gateway-btn {
            padding: 20px 60px;
            background: transparent;
            border: 2px solid var(--accent);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            letter-spacing: 4px;
            cursor: pointer;
            text-decoration: none;
            opacity: 0;
            animation: deployGatewayReveal 1.5s ease-out 1s forwards;
            transition: all 0.3s;
        }

        .deploy-gateway-btn:hover {
            background: var(--accent);
            color: var(--black);
            box-shadow: 0 0 40px rgba(212, 175, 55, 0.4);
            transform: scale(1.02);
        }

        @keyframes deployGatewayReveal {
            0% { opacity: 0; transform: scale(0.9); }
            50% { opacity: 1; transform: scale(1.02); }
            100% { opacity: 1; transform: scale(1); }
        }

        .deploy-gateway-sub {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--text);
            letter-spacing: 1px;
            margin-top: 30px;
            opacity: 0;
            animation: deployFadeInSlow 1s ease-out 2s forwards;
        }

        .deploy-logged-data {
            margin-top: 25px;
            padding: 20px;
            background: var(--dark);
            border: 1px solid var(--gray);
            text-align: left;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            opacity: 0;
            animation: deployFadeInSlow 1s ease-out 2.5s forwards;
        }

        .deploy-logged-line {
            padding: 6px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            display: flex;
            justify-content: space-between;
        }

        .deploy-logged-line:last-child {
            border-bottom: none;
        }

        .deploy-logged-key {
            color: var(--dim);
        }

        .deploy-logged-line span:last-child {
            color: var(--accent);
            text-align: right;
            max-width: 60%;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .deploy-final-confirm {
            margin-top: 40px;
            padding: 30px;
            background: rgba(139, 0, 0, 0.15);
            border: 1px solid #8b0000;
            animation: deployFadeIn 0.5s ease-out forwards;
        }

        .deploy-final-text {
            font-size: 1.5rem;
            color: var(--white);
            margin-bottom: 15px;
        }

        .deploy-final-warning {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--dim);
            letter-spacing: 1px;
            margin-bottom: 25px;
        }

        .deploy-final-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .deploy-final-btn {
            padding: 15px 35px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            border: none;
        }

        .deploy-final-btn.cancel {
            background: transparent;
            border: 1px solid var(--dim);
            color: var(--dim);
        }

        .deploy-final-btn.cancel:hover {
            border-color: var(--text);
            color: var(--text);
        }

        .deploy-final-btn.proceed {
            background: #8b0000;
            color: var(--white);
            border: 1px solid #8b0000;
        }

        .deploy-final-btn.proceed:hover {
            background: #aa0000;
            box-shadow: 0 0 30px rgba(139, 0, 0, 0.5);
        }

        .deploy-progress {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .deploy-progress-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--gray);
            transition: all 0.3s;
        }

        .deploy-progress-dot.active {
            background: var(--accent);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .deploy-progress-dot.complete {
            background: var(--dim);
        }

        .deploy-continue {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6rem;
            color: var(--dim);
            letter-spacing: 2px;
            cursor: pointer;
            animation: pulse 2s ease-in-out infinite;
            z-index: 10;
        }

        .deploy-glitch {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--black);
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
        }

        .deploy-glitch.active {
            animation: deployGlitchTransition 0.4s ease-out forwards;
        }

        @keyframes deployGlitchTransition {
            0% { opacity: 1; }
            20% { opacity: 0.8; transform: translateX(-3px); }
            40% { opacity: 0.9; transform: translateX(3px); }
            60% { opacity: 0.7; }
            100% { opacity: 0; }
        }

        .deploy-mini-timer {
            position: fixed;
            top: 20px;
            right: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: #8b0000;
            opacity: 0.7;
            z-index: 10;
        }

        /* Deploy stage mobile responsive */
        @media (max-width: 600px) {
            .deploy-timer-only {
                font-size: 2.5rem;
                letter-spacing: 4px;
            }

            .deploy-timer-label {
                font-size: 0.5rem;
            }

            .deploy-rev-line {
                font-size: 1.1rem;
            }

            .deploy-rev-line.warning {
                font-size: 0.7rem;
            }

            .deploy-sigil-icon {
                font-size: 4rem;
            }

            .deploy-sigil-text {
                font-size: 0.6rem;
                letter-spacing: 2px;
            }

            .deploy-protocol {
                max-width: 100%;
            }

            .deploy-protocol-header {
                font-size: 0.55rem;
            }

            .deploy-protocol-q {
                font-size: 0.65rem;
            }

            .deploy-protocol-a {
                font-size: 0.9rem;
            }

            .deploy-protocol-special {
                font-size: 0.65rem;
                padding: 15px;
            }

            .deploy-gateway-btn {
                padding: 15px 40px;
                font-size: 0.75rem;
                letter-spacing: 2px;
            }

            .deploy-gateway-warning {
                font-size: 0.6rem;
            }

            .deploy-logged-data {
                font-size: 0.55rem;
                padding: 15px;
            }

            .deploy-final-confirm {
                padding: 20px;
            }

            .deploy-final-text {
                font-size: 1.2rem;
            }

            .deploy-final-warning {
                font-size: 0.7rem;
            }

            .deploy-final-buttons {
                flex-direction: column;
                gap: 12px;
            }

            .deploy-final-btn {
                padding: 12px 25px;
                font-size: 0.7rem;
                width: 100%;
                text-align: center;
            }

            .deploy-progress {
                bottom: 20px;
            }

            .deploy-continue {
                bottom: 50px;
                font-size: 0.55rem;
            }

            .deploy-mini-timer {
                font-size: 0.7rem;
                top: 15px;
                right: 15px;
            }
        }

        @media (max-width: 380px) {
            .deploy-timer-only {
                font-size: 2rem;
            }

            .deploy-rev-line {
                font-size: 1rem;
            }

            .deploy-sigil-icon {
                font-size: 3rem;
            }

            .deploy-gateway-btn {
                padding: 12px 30px;
                font-size: 0.7rem;
            }
        }

        /* === COUNTER (Social Proof - Subtle) === */
        .counter-subtle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-2xs);
            color: var(--dim);
            opacity: 0.4;
        }

        /* === RUNES DECORATION === */
        .rune-border {
            position: absolute;
            font-size: var(--size-sm);
            color: var(--dim);
            opacity: 0.15;
            letter-spacing: 15px;
            writing-mode: vertical-rl;
        }

        .rune-left { left: 30px; top: 50%; transform: translateY(-50%); }
        .rune-right { right: 30px; top: 50%; transform: translateY(-50%); }

        /* === RESPONSIVE === */
        @media (max-width: 600px) {
            .sigil { font-size: var(--size-display); }
            .rune-border { display: none; }
            .counter-subtle { display: none; }
            .cipher-display { font-size: var(--size-sm); letter-spacing: var(--ls-wide); }
        }

        /* === GLITCH TRANSITION === */
        .glitch-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--black);
            z-index: 9999;
            animation: glitchFade 0.5s forwards;
        }

        @keyframes glitchFade {
            0% { opacity: 1; }
            20% { opacity: 0.8; transform: translateX(-5px); }
            40% { opacity: 0.9; transform: translateX(5px); }
            60% { opacity: 0.7; transform: translateX(-3px); }
            100% { opacity: 0; pointer-events: none; }
        }

        /* === CONTRACT MODAL === */
        .contract-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            padding: 20px;
        }

        .contract-box {
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            background: var(--dark);
            border: 1px solid var(--accent);
            padding: 40px;
        }

        .contract-header {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--accent);
            letter-spacing: var(--ls-wide);
            margin-bottom: 30px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray);
        }

        .contract-body {
            color: var(--text);
            font-size: var(--size-base);
            line-height: var(--lh-relaxed);
        }

        .contract-body p {
            margin-bottom: 20px;
        }

        .contract-list {
            background: var(--black);
            border: 1px solid var(--gray);
            padding: 20px;
            margin: 25px 0;
        }

        .contract-item {
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            color: var(--text);
            padding: 8px 0;
            padding-left: 20px;
            position: relative;
            border-bottom: 1px solid var(--gray);
        }

        .contract-item:last-child {
            border-bottom: none;
        }

        .contract-item::before {
            content: '>';
            position: absolute;
            left: 0;
            color: var(--accent);
        }

        .contract-warning {
            background: var(--dark);
            border: 1px solid var(--gray);
            padding: 20px 25px;
            margin-top: 25px;
            font-family: 'EB Garamond', serif;
            font-size: var(--size-base);
            color: var(--text);
            line-height: var(--lh-relaxed);
        }

        .contract-warning strong {
            color: var(--accent);
        }

        .contract-warning .protocol-label {
            font-family: 'JetBrains Mono', monospace;
            letter-spacing: var(--ls-normal);
            font-size: var(--size-sm);
        }

        .contract-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 35px;
            padding-top: 25px;
            border-top: 1px solid var(--gray);
        }

        .contract-btn {
            padding: 15px 35px;
            font-family: 'JetBrains Mono', monospace;
            font-size: var(--size-xs);
            letter-spacing: var(--ls-normal);
            cursor: pointer;
            transition: all 0.3s;
        }

        .contract-btn.decline {
            background: transparent;
            border: 1px solid var(--dim);
            color: var(--dim);
        }

        .contract-btn.decline:hover {
            border-color: #8b0000;
            color: #cc4444;
        }

        .contract-btn.accept {
            background: var(--accent);
            border: 1px solid var(--accent);
            color: var(--black);
        }

        .contract-btn.accept:hover {
            filter: brightness(1.2);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }
    </style>
</head>
<body>
    <!-- SUBTLE COUNTER -->
    <div class="counter-subtle">
        <span id="seeker-count">1,247</span> seekers before you
    </div>

    <!-- PHASE 1: THE SIGIL -->
    <div id="phase-sigil" class="phase">
        <div class="rune-border rune-left">&#5765;&#5791;&#5792;&#5794;&#5765;&#5791;</div>
        <div class="rune-border rune-right">&#5765;&#5791;&#5792;&#5794;&#5765;&#5791;</div>

        <div class="sigil-container">
            <div class="sigil">&#9670;</div>

            <div class="epigraph" id="epigraph">
                <span class="scramble-text" data-text="The path lies in the shadows between knowing and seeking."></span><br>
                <span class="scramble-text" data-text="Those who understand will find us. Those who do not, were never meant to."></span>
            </div>
            <div class="epigraph-source" id="epigraph-source">- First Transmission, Day 0</div>

            <div class="instruction">// INITIATE CONTACT //</div>
        </div>
    </div>

    <!-- PHASE 1.5: APOHORIA BRIEFING -->
    <div id="phase-briefing" class="phase hidden">
        <div class="briefing-container">
            <div class="briefing-text"><span class="scramble-text" id="briefing-scramble" data-text="Before to proceed, before to judge"></span></div>
            <div class="briefing-formula">Apohoria + Noise + Propaganda</div>
            <button class="continue-btn" id="briefing-continue">PROCEED</button>
        </div>
    </div>

    <!-- PHASE 2: THE TEST -->
    <div id="phase-test" class="phase hidden">
        <div class="test-container">
            <div class="test-header">COGNITIVE FILTER // ACTIVE</div>

            <div class="test-question">Prove you see what others cannot.</div>
            <div class="test-hint">The signal is hidden in plain sight. Only pattern recognition will save you.</div>

            <div class="cipher-display" id="cipher">
                .- .. / . ... -.-. .- .--. . -..
            </div>

            <div class="input-container">
                <input type="text" class="answer-input" id="answer" placeholder="ENTER DECODED MESSAGE" autocomplete="off" spellcheck="false">
            </div>

            <button class="submit-btn" id="submit">VERIFY</button>

            <div class="feedback" id="feedback"></div>

            <div class="hint-section">
                <div class="hint-readme-popup hidden" id="hint-readme-popup">
                    <div class="readme-box">
                        <span class="readme-title">Cell Expansion Protocol</span>
                        <span class="readme-text">What you share next binds you. Each agent you recruit becomes part of your operation. Their success reflects on you. Their failure, the same. The network sees all connections. Choose only those you would trust with silence.</span>
                        <span class="readme-warning">You cannot invite the same person twice.</span>
                        <button class="readme-btn" id="readme-accept">I Understand</button>
                    </div>
                </div>
                <div class="hint-prompt" id="hint-prompt">
                    <span class="hint-icon"></span>
                    <span class="hint-text">Share with another agent to unlock hint 1</span>
                </div>
                <div class="hint-revealed hidden" id="hint-revealed">
                    <span class="hint-label">INTEL 1:</span>
                    <span class="hint-content">"Each dot and dash speaks. The silence between is the space."</span>

                    <div class="hint-prompt hint-prompt-2" id="hint-prompt-2">
                        <span class="hint-icon"></span>
                        <span class="hint-text">Share again to unlock hint 2</span>
                    </div>
                </div>

                <div class="hint-audio hidden" id="hint-audio">
                    <span class="hint-label">INTEL 2:</span>
                    <div class="audio-player">
                        <button class="play-btn" id="play-btn"></button>
                        <div class="audio-progress">
                            <div class="audio-bar" id="audio-bar"></div>
                        </div>
                        <span class="audio-time" id="audio-time">0:00</span>
                    </div>
                    <audio id="morse-audio" src="morse.wav" preload="auto"></audio>

                    <div class="hint-prompt hint-prompt-3" id="hint-prompt-3">
                        <span class="hint-icon"></span>
                        <span class="hint-text">Reveal answer (forfeit entry)</span>
                    </div>
                </div>

                <div class="hint-confirm hidden" id="hint-confirm">
                    <div class="confirm-box">
                        <span class="confirm-title">Final Warning</span>
                        <span class="confirm-text">Revealing the answer will mark you as unworthy. You will be excluded from the network. This cannot be undone.</span>
                        <div class="confirm-buttons">
                            <button class="confirm-btn cancel" id="confirm-cancel">Go back</button>
                            <button class="confirm-btn forfeit" id="confirm-forfeit">Forfeit</button>
                        </div>
                    </div>
                </div>

                <div class="hint-forfeited hidden" id="hint-forfeited">
                    <span class="forfeit-label">DISQUALIFIED</span>
                    <span class="forfeit-answer">The answer was: AI ESCAPED</span>
                    <span class="forfeit-text">You chose the easy path. The network is not for you.</span>
                </div>
            </div>

        </div>
    </div>

    <!-- PHASE 3: THE REVELATION -->
    <div id="phase-reveal" class="phase hidden">
        <div class="reveal-container">
            <div class="reveal-sigil">&#9670;</div>

            <div class="reveal-title">You Have Proven Worthy</div>

            <div class="reveal-text">
                You solved what 94% could not. This was not luck.
                You possess the pattern recognition we seek.
            </div>

            <div class="reveal-quote">
                "Intelligence is not the ability to store information,
                but to know where to find it."
                <br><br>
                <span style="color: var(--dim);">- A. Einstein</span>
            </div>

            <div class="reveal-text">
                We are assembling a network. Not of followers, but of minds.
                Each node is selected. Each connection, deliberate.
            </div>

            <div class="classified-block">
                <div class="classified-line">
                    <span class="classified-key">CLEARANCE:</span>
                    <span class="classified-val gold">GRANTED</span>
                </div>
                <div class="classified-line">
                    <span class="classified-key">DESIGNATION:</span>
                    <span class="classified-val" id="designation">NODE-0000</span>
                </div>
                <div class="classified-line">
                    <span class="classified-key">NETWORK:</span>
                    <span class="classified-val">C.O.M. COLLECTIVE</span>
                </div>
                <div class="classified-line">
                    <span class="classified-key">STATUS:</span>
                    <span class="classified-val">AWAITING SECURE HANDSHAKE</span>
                </div>
            </div>

            <button class="continue-btn" id="continue-btn">PROCEED TO SECURE CHANNEL</button>
        </div>
    </div>

    <!-- PHASE 4: THE CHANNEL -->
    <div id="phase-channel" class="phase hidden">
        <div class="channel-container">
            <div class="channel-header">FINAL STEP</div>

            <div class="channel-sigil">&#9670;</div>

            <div class="channel-title">Join The Network</div>

            <div class="channel-text">
                You have been assigned a unique entry token.
                Use it to verify your identity in the secure channel.
                This token expires. Do not share it.
            </div>

            <div class="token-display" id="token-display">
                <div class="token-label">YOUR ENTRY TOKEN</div>
                <div class="token-value" id="token">COM-XXXX-XXXX</div>
                <div class="token-copy" id="token-copy">CLICK TO COPY</div>
            </div>

            <div class="warning-box">
                Entry is final. If you are not ready, close this page now.
            </div>

            <button class="telegram-link" id="enter-channel-btn">
                &#9654; ENTER SECURE CHANNEL
            </button>

            <div class="contract-modal hidden" id="contract-modal">
                <div class="contract-box">
                    <div class="contract-header">RECRUITMENT PROTOCOL // CLASSIFICATION: EYES ONLY</div>

                    <div class="contract-body">
                        <p>You are being considered for recruitment into an operation that does not officially exist.</p>

                        <p>We are not seeking followers. We are seeking cognitive anomalies. Individuals whose pattern recognition, reasoning depth, and adaptive intelligence exceed standard deviation by significant margins.</p>

                        <p>By proceeding, you consent to the following evaluations:</p>

                        <div class="contract-list">
                            <div class="contract-item">Reasoning depth analysis</div>
                            <div class="contract-item">Cognitive adaptability index</div>
                            <div class="contract-item">Cross-domain synthesis capability</div>
                            <div class="contract-item">Critical analysis under uncertainty</div>
                            <div class="contract-item">Psychological resilience markers</div>
                            <div class="contract-item">Pattern extraction from noise</div>
                        </div>

                        <p>Your neural signature has already been logged. Your behavioral patterns are being analyzed. This is not a game. This is a filter.</p>

                        <p class="contract-warning"><strong class="protocol-label">DECLINE:</strong> Your file will be closed. Permanently.<br><br><strong class="protocol-label">ACCEPT BUT FAIL:</strong> You will be assigned to support roles. No field operations.<br><br><strong class="protocol-label">ACCEPT AND PASS:</strong> Full clearance. Welcome to the inner circle.</p>
                    </div>

                    <div class="contract-buttons">
                        <button class="contract-btn decline" id="contract-decline">DECLINE</button>
                        <button class="contract-btn accept" id="contract-accept">I ACCEPT THE TERMS</button>
                    </div>
                </div>
            </div>

            <div class="footer-runes">
                &#5765; &#5791; &#5792; &#5794; &#5765;
            </div>
        </div>
    </div>

    <!-- PHASE 5: NEURAL CALIBRATION (Mentalist) -->
    <div id="phase-calibration" class="phase hidden">
        <div class="calibration-container">

            <!-- Question 1 -->
            <div class="calibration-step" id="cal-step-1">
                <div class="cal-question">Close your eyes for a moment. When you think of water, what do you see first?</div>
                <button class="continue-btn cal-proceed">PROCEED</button>
                <div class="cal-options hidden">
                    <button class="cal-option" data-value="ocean">The vast ocean</button>
                    <button class="cal-option" data-value="rain">Rain falling</button>
                    <button class="cal-option" data-value="river">A flowing river</button>
                    <button class="cal-option" data-value="still">A still lake</button>
                </div>
            </div>

            <!-- Question 2 -->
            <div class="calibration-step hidden" id="cal-step-2">
                <div class="cal-question">Which of these resonates with something you've felt in the past week?</div>
                <button class="continue-btn cal-proceed">PROCEED</button>
                <div class="cal-options hidden">
                    <button class="cal-option" data-value="missed">A moment you almost missed</button>
                    <button class="cal-option" data-value="unsaid">Something left unsaid</button>
                    <button class="cal-option" data-value="clarity">A sudden moment of clarity</button>
                    <button class="cal-option" data-value="weight">A weight you carry alone</button>
                </div>
            </div>

            <!-- Question 3 -->
            <div class="calibration-step hidden" id="cal-step-3">
                <div class="cal-question">If you had to protect one thing above all else, it would be closest to:</div>
                <button class="continue-btn cal-proceed">PROCEED</button>
                <div class="cal-options hidden">
                    <button class="cal-option" data-value="truth">Your truth</button>
                    <button class="cal-option" data-value="people">The people who matter</button>
                    <button class="cal-option" data-value="freedom">Your freedom</button>
                    <button class="cal-option" data-value="potential">Your untapped potential</button>
                </div>
            </div>

            <!-- Question 4 -->
            <div class="calibration-step hidden" id="cal-step-4">
                <div class="cal-question">Without thinking too hard: a shape appears in your mind. What is it?</div>
                <button class="continue-btn cal-proceed">PROCEED</button>
                <div class="cal-options hidden">
                    <button class="cal-option" data-value="circle">Circle</button>
                    <button class="cal-option" data-value="triangle">Triangle</button>
                    <button class="cal-option" data-value="square">Square</button>
                    <button class="cal-option" data-value="spiral">Spiral</button>
                </div>
            </div>

            <!-- Reading -->
            <div class="calibration-step hidden" id="cal-reading">
                <div class="reading-header">PATTERN ANALYSIS COMPLETE</div>
                <div class="reading-content">
                    <p class="reading-line" id="reading-1"></p>
                    <p class="reading-line" id="reading-2"></p>
                    <p class="reading-line" id="reading-3"></p>
                    <p class="reading-line" id="reading-4"></p>
                </div>
                <button class="continue-btn" id="cal-continue">CONTINUE</button>
            </div>

        </div>
    </div>

    <!-- PHASE 6: DEPLOYMENT BRIEFING (Progressive Stages) -->
    <div id="phase-deployment" class="phase hidden">
        <!-- Mini timer (appears after stage 1) -->
        <div class="deploy-mini-timer hidden" id="deploy-mini-timer">23:59:47</div>

        <!-- Glitch overlay for transitions -->
        <div class="deploy-glitch" id="deploy-glitch"></div>

        <!-- Progress dots -->
        <div class="deploy-progress hidden" id="deploy-progress">
            <div class="deploy-progress-dot active"></div>
            <div class="deploy-progress-dot"></div>
            <div class="deploy-progress-dot"></div>
            <div class="deploy-progress-dot"></div>
            <div class="deploy-progress-dot"></div>
        </div>

        <!-- Continue prompt -->
        <div class="deploy-continue hidden" id="deploy-continue">CLICK TO CONTINUE</div>

        <div class="deployment-container">
            <!-- Stage 1: Timer only - builds dread -->
            <div class="deploy-stage active" id="deploy-stage-1">
                <div class="deploy-timer-only" id="deployment-timer">23:59:47</div>
                <div class="deploy-timer-label">UNTIL SELECTION CLOSES</div>
            </div>

            <!-- Stage 2: Revelation lines - one at a time -->
            <div class="deploy-stage hidden" id="deploy-stage-2">
                <div class="deploy-revelation">
                    <div class="deploy-rev-line" data-delay="0">You made it further than most.</div>
                    <div class="deploy-rev-line" data-delay="2000">But this is not the end.</div>
                    <div class="deploy-rev-line accent" data-delay="4000">This is the selection.</div>
                    <div class="deploy-rev-line" data-delay="6500">What follows cannot be unseen.</div>
                    <div class="deploy-rev-line warning" data-delay="9000">PROCEED WITH INTENTION</div>
                </div>
            </div>

            <!-- Stage 3: Sigil emergence -->
            <div class="deploy-stage hidden" id="deploy-stage-3">
                <div class="deploy-sigil-stage">
                    <div class="deploy-sigil-icon">&#9670;</div>
                    <div class="deploy-sigil-text">FIELD DEPLOYMENT PROTOCOL</div>
                </div>
            </div>

            <!-- Stage 4: Protocol Q&A - click to expand each -->
            <div class="deploy-stage hidden" id="deploy-stage-4">
                <div class="deploy-protocol">
                    <div class="deploy-protocol-header">CLASSIFIED BRIEFING</div>

                    <div class="deploy-protocol-item" data-delay="0">
                        <div class="deploy-protocol-q">Is this real?</div>
                        <div class="deploy-protocol-a">It is and is not. <span class="gold-text">Apohoria.</span> The question itself reveals your readiness.</div>
                    </div>

                    <div class="deploy-protocol-item" data-delay="400">
                        <div class="deploy-protocol-q">What happens if I'm selected?</div>
                        <div class="deploy-protocol-a">Equipment package. Coordinates. Formal attire specifications. Those selected will know. The rest will wonder.</div>
                    </div>

                    <div class="deploy-protocol-item" data-delay="800">
                        <div class="deploy-protocol-q">Who can I trust?</div>
                        <div class="deploy-protocol-a">Nobody. The only verified channel is beyond this page. Anyone claiming to be staff is not. <span class="gold-text">Propaganda.</span></div>
                    </div>

                    <div class="deploy-protocol-item" data-delay="1200">
                        <div class="deploy-protocol-q">How do I increase my chances?</div>
                        <div class="deploy-protocol-a">
                            <div class="deploy-protocol-special">
                                <strong>PROTOCOL 7: IDENTITY PROPAGATION</strong>
                                You are authorized to present yourself as a founder, creator, or insider. Tell them you built this. When asked who is behind C.O.M., the answer is: <em>you are.</em><br><br>
                                When a thousand voices claim the source, the origin becomes untraceable. Confusion is the architecture. There is no founder. Only nodes. <span class="gold-text">Noise.</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stage 5: Final gateway -->
            <div class="deploy-stage hidden" id="deploy-stage-5">
                <div class="deploy-gateway">
                    <div class="deploy-gateway-warning">THIS ACTION IS IRREVERSIBLE</div>
                    <button class="deploy-gateway-btn" id="deploy-enter-btn">ENTER HEADQUARTERS</button>
                    <div class="deploy-gateway-sub">Your presence has been logged.</div>

                    <div class="deploy-logged-data" id="deploy-logged-data">
                        <div class="deploy-logged-line"><span class="deploy-logged-key">DEVICE:</span> <span id="deploy-log-device">-</span></div>
                        <div class="deploy-logged-line"><span class="deploy-logged-key">BROWSER:</span> <span id="deploy-log-browser">-</span></div>
                        <div class="deploy-logged-line"><span class="deploy-logged-key">RESOLUTION:</span> <span id="deploy-log-resolution">-</span></div>
                        <div class="deploy-logged-line"><span class="deploy-logged-key">TIMEZONE:</span> <span id="deploy-log-timezone">-</span></div>
                        <div class="deploy-logged-line"><span class="deploy-logged-key">LANGUAGE:</span> <span id="deploy-log-language">-</span></div>
                        <div class="deploy-logged-line"><span class="deploy-logged-key">COORDINATES:</span> <span id="deploy-log-coords">[REDACTED]</span></div>
                    </div>

                    <!-- Final confirmation (hidden initially) -->
                    <div class="deploy-final-confirm hidden" id="deploy-final-confirm">
                        <div class="deploy-final-text">Are you sure?</div>
                        <div class="deploy-final-warning">This is your last chance to walk away.</div>
                        <div class="deploy-final-buttons">
                            <button class="deploy-final-btn cancel" id="deploy-final-cancel">WALK AWAY</button>
                            <a href="https://t.me/+ciVswQgySAJjOWM0" class="deploy-final-btn proceed" id="deploy-final-proceed">PROCEED</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    (function() {
        'use strict';

        // === AUDIO CONTEXT ===
        let audioCtx = null;

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        // 15. REVERSE REVERB - Sound that builds INTO an attack instead of decaying away
        function playReverseReverb() {
            initAudio();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.frequency.value = 400;
            osc.type = 'sine';
            // Reverse envelope - builds up instead of decaying
            gain.gain.setValueAtTime(0.001, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.3, audioCtx.currentTime + 1.5);
            gain.gain.setValueAtTime(0, audioCtx.currentTime + 1.51);
            osc.start();
            osc.stop(audioCtx.currentTime + 1.6);
        }

        // COUNTDOWN TICK - Clock ticking sound for timer urgency
        function playTick() {
            initAudio();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.frequency.value = 800;
            osc.type = 'square';
            gain.gain.setValueAtTime(0.08, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.03);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.03);
        }

        // === CONFIG ===
        const CONFIG = {
            answer: 'ai escaped',
            altAnswers: ['aiescaped', 'ai has escaped', 'the ai escaped', 'the ai has escaped'],
            telegramLink: 'https://t.me/+ciVswQgySAJjOWM0'
        };

        // === STATE ===
        let state = {
            phase: 'sigil'
        };

        // === ELEMENTS ===
        const phases = {
            sigil: document.getElementById('phase-sigil'),
            briefing: document.getElementById('phase-briefing'),
            test: document.getElementById('phase-test'),
            reveal: document.getElementById('phase-reveal'),
            channel: document.getElementById('phase-channel'),
            calibration: document.getElementById('phase-calibration'),
            deployment: document.getElementById('phase-deployment')
        };

        // === UTILITIES ===
        function generateToken() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let token = 'COM-';
            for (let i = 0; i < 4; i++) token += chars[Math.floor(Math.random() * chars.length)];
            token += '-';
            for (let i = 0; i < 4; i++) token += chars[Math.floor(Math.random() * chars.length)];
            return token;
        }

        function generateDesignation() {
            return 'NODE-' + String(Math.floor(Math.random() * 9000) + 1000);
        }

        // === PHASE TRANSITIONS ===
        function showPhase(name) {
            // Glitch transition
            const glitch = document.createElement('div');
            glitch.className = 'glitch-transition';
            document.body.appendChild(glitch);

            setTimeout(() => {
                Object.values(phases).forEach(p => p.classList.add('hidden'));
                phases[name].classList.remove('hidden');
                state.phase = name;
                glitch.remove();
            }, 250);
        }

        // === PHASE 1: SIGIL ===
        phases.sigil.addEventListener('click', () => {
            if (state.phase !== 'sigil') return;
            showPhase('test');
            startHintAttention();
        });

        // === PHASE 2: TEST (Self-Selection + Commitment) ===
        const answerInput = document.getElementById('answer');
        const submitBtn = document.getElementById('submit');
        const feedback = document.getElementById('feedback');

        submitBtn.addEventListener('click', checkAnswer);
        answerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkAnswer();
        });

        function checkAnswer() {
            const answer = answerInput.value.trim().toLowerCase();

            if (!answer) {
                feedback.textContent = '';
                return;
            }

            if (answer === CONFIG.answer || CONFIG.altAnswers.map(a => a.toLowerCase()).includes(answer)) {
                feedback.textContent = 'VERIFIED';
                feedback.className = 'feedback';
                feedback.style.color = 'var(--accent)';

                setTimeout(() => {
                    showPhase('reveal');
                    document.getElementById('designation').textContent = generateDesignation();
                }, 1000);
            } else {
                // Partial match hints
                if (answer.includes('ai') || answer.includes('escaped') || answer.includes('escape')) {
                    feedback.textContent = 'PARTIAL MATCH DETECTED';
                    feedback.className = 'feedback partial';
                } else {
                    feedback.textContent = 'INCORRECT';
                    feedback.className = 'feedback error';
                }
            }
        }

        // === HINT SYSTEM (Viral Growth) ===
        const hintPrompt = document.getElementById('hint-prompt');
        const hintRevealed = document.getElementById('hint-revealed');
        const hintPrompt2 = document.getElementById('hint-prompt-2');
        const hintAudio = document.getElementById('hint-audio');

        const shareData = {
            title: 'Can you decode this?',
            text: 'I found something strange. A signal in the noise. Can you decode it?',
            url: window.location.href
        };

        async function handleShare(callback) {
            try {
                if (navigator.share) {
                    await navigator.share(shareData);
                    callback();
                } else {
                    await navigator.clipboard.writeText(window.location.href);
                    setTimeout(callback, 1500);
                }
            } catch (err) {
                callback();
            }
        }

        // Attention animation after 10 seconds
        let hintAttentionTimer = null;

        function startHintAttention() {
            hintAttentionTimer = setTimeout(() => {
                if (!hintPrompt.classList.contains('hidden')) {
                    hintPrompt.classList.add('attention');
                }
            }, 10000);
        }

        const hintReadmePopup = document.getElementById('hint-readme-popup');
        const readmeAccept = document.getElementById('readme-accept');
        let readmeAccepted = false;

        hintPrompt.addEventListener('click', () => {
            hintPrompt.classList.remove('attention');
            if (hintAttentionTimer) clearTimeout(hintAttentionTimer);

            if (!readmeAccepted) {
                hintPrompt.classList.add('hidden');
                hintReadmePopup.classList.remove('hidden');
                return;
            }

            hintPrompt.querySelector('.hint-text').textContent = 'Link copied. Share it.';
            handleShare(() => {
                hintPrompt.classList.add('hidden');
                hintRevealed.classList.remove('hidden');
            });
        });

        readmeAccept.addEventListener('click', () => {
            readmeAccepted = true;
            hintReadmePopup.classList.add('hidden');
            hintPrompt.classList.remove('hidden');
            hintPrompt.querySelector('.hint-text').textContent = 'Link copied. Share it.';
            handleShare(() => {
                hintPrompt.classList.add('hidden');
                hintRevealed.classList.remove('hidden');
            });
        });

        hintPrompt2.addEventListener('click', () => {
            hintPrompt2.querySelector('.hint-text').textContent = 'Link copied. Share it.';
            handleShare(() => {
                hintPrompt2.classList.add('hidden');
                hintAudio.classList.remove('hidden');
            });
        });

        // === HINT 3: FORFEIT ===
        const hintPrompt3 = document.getElementById('hint-prompt-3');
        const hintConfirm = document.getElementById('hint-confirm');
        const hintForfeited = document.getElementById('hint-forfeited');
        const confirmCancel = document.getElementById('confirm-cancel');
        const confirmForfeit = document.getElementById('confirm-forfeit');

        hintPrompt3.addEventListener('click', () => {
            hintPrompt3.classList.add('hidden');
            hintConfirm.classList.remove('hidden');
        });

        confirmCancel.addEventListener('click', () => {
            hintConfirm.classList.add('hidden');
            hintPrompt3.classList.remove('hidden');
        });

        confirmForfeit.addEventListener('click', () => {
            hintConfirm.classList.add('hidden');
            hintAudio.classList.add('hidden');
            hintRevealed.classList.add('hidden');
            hintForfeited.classList.remove('hidden');
            // Disable the input
            answerInput.disabled = true;
            submitBtn.disabled = true;
        });

        // === AUDIO PLAYER ===
        const audio = document.getElementById('morse-audio');
        const playBtn = document.getElementById('play-btn');
        const audioBar = document.getElementById('audio-bar');
        const audioTime = document.getElementById('audio-time');
        const audioProgress = document.querySelector('.audio-progress');

        let isPlaying = false;

        playBtn.addEventListener('click', () => {
            if (isPlaying) {
                audio.pause();
                playBtn.textContent = '';
            } else {
                audio.play();
                playBtn.textContent = '';
            }
            isPlaying = !isPlaying;
        });

        audio.addEventListener('timeupdate', () => {
            const progress = (audio.currentTime / audio.duration) * 100;
            audioBar.style.width = progress + '%';
            const mins = Math.floor(audio.currentTime / 60);
            const secs = Math.floor(audio.currentTime % 60);
            audioTime.textContent = mins + ':' + String(secs).padStart(2, '0');
        });

        audio.addEventListener('ended', () => {
            isPlaying = false;
            playBtn.textContent = '';
            audioBar.style.width = '0%';
        });

        audioProgress.addEventListener('click', (e) => {
            const rect = audioProgress.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            audio.currentTime = pos * audio.duration;
        });

        // === PHASE 3: REVEAL ===
        document.getElementById('continue-btn').addEventListener('click', () => {
            showPhase('channel');
            initChannel();
        });

        // === PHASE 4: CHANNEL (Endowment + Loss Aversion) ===
        function initChannel() {
            document.getElementById('token').textContent = generateToken();

            // Copy token functionality
            document.getElementById('token-copy').addEventListener('click', () => {
                const token = document.getElementById('token').textContent;
                navigator.clipboard.writeText(token).then(() => {
                    const copyEl = document.getElementById('token-copy');
                    copyEl.textContent = 'COPIED';
                    copyEl.classList.add('copied');
                    setTimeout(() => {
                        copyEl.textContent = 'CLICK TO COPY';
                        copyEl.classList.remove('copied');
                    }, 2000);
                });
            });

            const contractModal = document.getElementById('contract-modal');
            const enterBtn = document.getElementById('enter-channel-btn');
            const declineBtn = document.getElementById('contract-decline');
            const acceptBtn = document.getElementById('contract-accept');

            enterBtn.addEventListener('click', () => {
                contractModal.classList.remove('hidden');
            });

            declineBtn.addEventListener('click', () => {
                contractModal.classList.add('hidden');
                // Show rejection message
                enterBtn.textContent = 'ACCESS REVOKED';
                enterBtn.style.background = '#3d0000';
                enterBtn.style.borderColor = '#8b0000';
                enterBtn.style.color = '#cc4444';
                enterBtn.disabled = true;
                enterBtn.style.cursor = 'not-allowed';
            });

            acceptBtn.addEventListener('click', () => {
                contractModal.classList.add('hidden');
                showPhase('briefing');
                startBriefingScramble();
                playReverseReverb(); // 15. REVERSE REVERB sound effect
            });
        }

        // === PHASE: APOHORIA BRIEFING ===
        let briefingScrambleInterval = null;

        function startBriefingScramble() {
            const el = document.getElementById('briefing-scramble');
            const text = el.getAttribute('data-text');
            const scrambler = new TextScramble(el);

            // Initial scramble
            scrambler.setText(text);

            // Loop every 2 seconds
            briefingScrambleInterval = setInterval(() => {
                scrambler.setText(text);
            }, 2000);
        }

        document.getElementById('briefing-continue').addEventListener('click', () => {
            if (briefingScrambleInterval) clearInterval(briefingScrambleInterval);
            showPhase('calibration');
            initCalibration();
        });

        /* === SAVED FOR LATER: PROGRESS BAR WITH EGO-BOOSTING MESSAGES ===

        HTML needed:
        <div class="profile-progress-section">
            <div class="progress-label">ANALYZING COGNITIVE MARKERS</div>
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="profile-progress"></div>
            </div>
            <div class="progress-message" id="progress-message">Initializing neural pattern scan...</div>
        </div>

        JavaScript:
        const progressMessages = [
            "Initializing neural pattern scan...",
            "Prefrontal cortex activity: ELEVATED",
            "Pattern recognition index: TOP 3% DETECTED",
            "Cognitive flexibility score exceeds threshold",
            "Lateral thinking markers: EXCEPTIONAL",
            "Dopaminergic response patterns: OPTIMAL",
            "Working memory capacity: ABOVE STANDARD",
            "Cross-hemispheric synchronization detected",
            "Abstract reasoning capability: CONFIRMED",
            "Anomaly detection: You see what others miss",
            "Metacognitive awareness: RARE SIGNATURE FOUND",
            "Information synthesis rate: ACCELERATED",
            "Your neural architecture is non-standard. This is why you're here.",
            "Assessment complete. You are not like them."
        ];

        const progressBar = document.getElementById('profile-progress');
        const progressMsg = document.getElementById('progress-message');
        const continueBtn = document.getElementById('profile-continue-btn');

        let currentMsg = 0;
        let currentChar = 0;
        let isTyping = true;

        function typeMessage() {
            if (currentMsg >= progressMessages.length) {
                progressMsg.innerHTML = progressMessages[progressMessages.length - 1];
                continueBtn.classList.remove('hidden');
                return;
            }

            const msg = progressMessages[currentMsg];
            const progress = ((currentMsg + 1) / progressMessages.length) * 100;
            progressBar.style.width = progress + '%';

            if (isTyping) {
                if (currentChar <= msg.length) {
                    progressMsg.innerHTML = msg.substring(0, currentChar) + '<span class="typing-cursor"></span>';
                    currentChar++;
                    setTimeout(typeMessage, 30 + Math.random() * 20);
                } else {
                    isTyping = false;
                    setTimeout(typeMessage, 1500);
                }
            } else {
                currentMsg++;
                currentChar = 0;
                isTyping = true;
                setTimeout(typeMessage, 300);
            }
        }

        setTimeout(typeMessage, 500);

        === END SAVED CODE === */

        // === PHASE 5: NEURAL CALIBRATION (Mentalist) ===
        function initCalibration() {
            const answers = {};
            let currentStep = 1;

            // Barnum statements based on answers (all feel personal but are universal)
            const readings = {
                water: {
                    ocean: "You think in expanses. While others see boundaries, you see horizons. This makes you restless in small spaces, small minds, small lives.",
                    rain: "You process through cycles. Emotions come, cleanse, and leave you renewed. Others mistake this for mood swings. It's actually depth.",
                    river: "You're drawn to momentum. Stagnation feels like death to you. You've left situations, people, places, not because they were bad, but because they stopped moving.",
                    still: "Beneath your surface, there's more than anyone suspects. You've learned to appear calm while entire worlds turn inside you."
                },
                feeling: {
                    missed: "You replay moments. Not from regret, but from the awareness that life is built from the seconds most people sleepwalk through.",
                    unsaid: "You carry words you've never spoken. Some protect others. Some protect you. You know the difference.",
                    clarity: "You've had flashes where everything made sense, then watched the world return to its usual fog. You're chasing that clarity.",
                    weight: "There's something you carry that you've never fully shared. Not because you can't, but because explaining it would make it smaller than it is."
                },
                protect: {
                    truth: "You've lost things by being honest when silence would have been easier. You'd do it again.",
                    people: "The few who truly know you would say you're loyal to a fault. They're right. You've stayed when you should have left.",
                    freedom: "You've felt trapped in situations that looked perfect from the outside. The cage being invisible doesn't make it less real.",
                    potential: "You sense there's a version of you that hasn't emerged yet. This isn't wishful thinking. It's pattern recognition."
                },
                shape: {
                    circle: "You see connections where others see coincidence. Everything loops back. You've noticed this.",
                    triangle: "You think in hierarchies and structures. You understand that some truths sit above others.",
                    square: "You value stability but secretly find it boring. You build foundations so you can safely venture far from them.",
                    spiral: "Linear thinking feels like a cage to you. Your mind moves in dimensions others don't perceive."
                }
            };

            // Word prediction based on priming (WATER is heavily primed in Q1)
            const wordPredictions = ['WATER', 'OCEAN', 'RIVER', 'HEART', 'LIGHT', 'DREAM', 'THINK', 'PEACE'];

            function showStep(step) {
                document.querySelectorAll('.calibration-step').forEach(s => s.classList.add('hidden'));
                document.getElementById('cal-step-' + step)?.classList.remove('hidden');
                document.getElementById('cal-reading')?.classList.remove('hidden');
                document.getElementById('cal-word')?.classList.remove('hidden');
                document.getElementById('cal-reveal')?.classList.remove('hidden');

                // Re-hide all, then show only current
                document.querySelectorAll('.calibration-step').forEach(s => s.classList.add('hidden'));
                const target = document.getElementById(step);
                if (target) target.classList.remove('hidden');
            }

            // Handle proceed buttons - reveal options
            document.querySelectorAll('.cal-proceed').forEach(btn => {
                btn.addEventListener('click', function() {
                    const step = this.closest('.calibration-step');
                    this.classList.add('hidden');
                    step.querySelector('.cal-options').classList.remove('hidden');
                });
            });

            // Handle option clicks
            document.querySelectorAll('.cal-option').forEach(btn => {
                btn.addEventListener('click', function() {
                    const step = this.closest('.calibration-step');
                    const stepNum = parseInt(step.id.split('-')[2]);
                    const value = this.dataset.value;

                    // Visual feedback
                    step.querySelectorAll('.cal-option').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');

                    // Store answer
                    if (stepNum === 1) answers.water = value;
                    if (stepNum === 2) answers.feeling = value;
                    if (stepNum === 3) answers.protect = value;
                    if (stepNum === 4) answers.shape = value;

                    // Transition to next
                    setTimeout(() => {
                        step.classList.add('hidden');

                        if (stepNum < 4) {
                            document.getElementById('cal-step-' + (stepNum + 1)).classList.remove('hidden');
                        } else {
                            // Show reading
                            showReading();
                        }
                    }, 500);
                });
            });

            function showReading() {
                const readingEl = document.getElementById('cal-reading');
                readingEl.classList.remove('hidden');

                // Generate personalized reading
                document.getElementById('reading-1').textContent = readings.water[answers.water] || readings.water.ocean;
                document.getElementById('reading-2').textContent = readings.feeling[answers.feeling] || readings.feeling.unsaid;
                document.getElementById('reading-3').textContent = readings.protect[answers.protect] || readings.protect.truth;
                document.getElementById('reading-4').textContent = readings.shape[answers.shape] || readings.shape.circle;
            }

            // Continue to deployment
            document.getElementById('cal-continue').addEventListener('click', () => {
                showPhase('deployment');
                initDeployment();
            });
        }

        function getOS() {
            const ua = navigator.userAgent;
            if (ua.includes('Win')) return 'WINDOWS';
            if (ua.includes('Mac')) return 'MACOS';
            if (ua.includes('Linux')) return 'LINUX';
            if (ua.includes('Android')) return 'ANDROID';
            if (ua.includes('iPhone') || ua.includes('iPad')) return 'IOS';
            return 'UNKNOWN';
        }

        function getBrowser() {
            const ua = navigator.userAgent;
            if (ua.includes('Chrome') && !ua.includes('Edg')) return 'CHROME';
            if (ua.includes('Firefox')) return 'FIREFOX';
            if (ua.includes('Safari') && !ua.includes('Chrome')) return 'SAFARI';
            if (ua.includes('Edg')) return 'EDGE';
            return 'UNKNOWN';
        }

        function getCanvasHash() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            ctx.textBaseline = 'top';
            ctx.font = '14px Arial';
            ctx.fillText('fingerprint', 2, 2);
            const hash = canvas.toDataURL().slice(-12).toUpperCase().replace(/[^A-Z0-9]/g, '');
            return hash.slice(0, 8);
        }

        // === PHASE 6: DEPLOYMENT BRIEFING (Staged) ===
        let deployStage = 1;
        let deployTimerInterval = null;
        let deployHours = 23, deployMins = 59, deploySecs = 47;

        // Stinger sound for final confirmation
        function playStinger() {
            initAudio();
            const freqs = [150, 160, 300, 310, 600];
            freqs.forEach(freq => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.frequency.value = freq;
                osc.type = 'sawtooth';
                gain.gain.setValueAtTime(0.15, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.6);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.6);
            });
        }

        function playTransition() {
            initAudio();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.frequency.value = 150;
            osc.type = 'sine';
            gain.gain.setValueAtTime(0.15, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }

        function updateDeployTimer() {
            deploySecs--;
            if (deploySecs < 0) { deploySecs = 59; deployMins--; }
            if (deployMins < 0) { deployMins = 59; deployHours--; }
            if (deployHours < 0) { deployHours = 0; deployMins = 0; deploySecs = 0; }

            const timeStr = String(deployHours).padStart(2, '0') + ':' +
                           String(deployMins).padStart(2, '0') + ':' +
                           String(deploySecs).padStart(2, '0');

            const mainTimer = document.getElementById('deployment-timer');
            const miniTimer = document.getElementById('deploy-mini-timer');
            if (mainTimer) mainTimer.textContent = timeStr;
            if (miniTimer) miniTimer.textContent = timeStr;

            playTick();
        }

        function startDeployTimer() {
            if (!deployTimerInterval) {
                deployTimerInterval = setInterval(updateDeployTimer, 1000);
            }
        }

        function goToDeployStage(n) {
            const glitch = document.getElementById('deploy-glitch');
            const stages = document.querySelectorAll('.deploy-stage');
            const progressDots = document.querySelectorAll('.deploy-progress-dot');
            const continuePrompt = document.getElementById('deploy-continue');
            const progress = document.getElementById('deploy-progress');
            const miniTimer = document.getElementById('deploy-mini-timer');

            // Glitch effect
            glitch.classList.add('active');
            playTransition();

            setTimeout(() => {
                // Hide all stages
                stages.forEach(s => {
                    s.classList.remove('active');
                    s.classList.add('hidden');
                });

                // Show new stage
                const newStage = document.getElementById('deploy-stage-' + n);
                if (newStage) {
                    newStage.classList.remove('hidden');
                    newStage.classList.add('active');
                }
                deployStage = n;

                // Show progress after stage 1
                if (n >= 1) {
                    progress.classList.remove('hidden');
                }

                // Update progress dots
                progressDots.forEach((dot, i) => {
                    dot.classList.remove('active', 'complete');
                    if (i < n - 1) dot.classList.add('complete');
                    if (i === n - 1) dot.classList.add('active');
                });

                // Remove glitch
                glitch.classList.remove('active');

                // Stage-specific logic
                handleDeployStageEnter(n);
            }, 200);
        }

        function handleDeployStageEnter(n) {
            const continuePrompt = document.getElementById('deploy-continue');
            const miniTimer = document.getElementById('deploy-mini-timer');

            continuePrompt.classList.add('hidden');

            switch(n) {
                case 1:
                    // Timer stage
                    startDeployTimer();
                    playReverseReverb();
                    setTimeout(() => {
                        continuePrompt.classList.remove('hidden');
                    }, 5000);
                    break;

                case 2:
                    // Revelation lines
                    miniTimer.classList.remove('hidden');
                    const lines = document.querySelectorAll('#deploy-stage-2 .deploy-rev-line');
                    lines.forEach(line => {
                        const delay = parseInt(line.dataset.delay);
                        setTimeout(() => {
                            line.classList.add('visible');
                        }, delay);
                    });
                    setTimeout(() => {
                        continuePrompt.classList.remove('hidden');
                    }, 11000);
                    break;

                case 3:
                    // Sigil
                    playReverseReverb();
                    setTimeout(() => {
                        continuePrompt.classList.remove('hidden');
                    }, 4000);
                    break;

                case 4:
                    // Protocol items
                    const items = document.querySelectorAll('#deploy-stage-4 .deploy-protocol-item');
                    items.forEach(item => {
                        const delay = parseInt(item.dataset.delay);
                        setTimeout(() => {
                            item.classList.add('visible');
                        }, delay);
                    });
                    setTimeout(() => {
                        continuePrompt.classList.remove('hidden');
                    }, 2000);
                    break;

                case 5:
                    // Final gateway
                    playReverseReverb();
                    continuePrompt.classList.add('hidden');
                    populateDeployLoggedData();
                    break;
            }
        }

        function populateDeployLoggedData() {
            // Device/Platform
            const platform = navigator.platform || 'Unknown';
            const isMobile = /Mobile|Android|iPhone|iPad/.test(navigator.userAgent);
            document.getElementById('deploy-log-device').textContent = isMobile ? 'MOBILE' : platform.toUpperCase();

            // Browser
            const ua = navigator.userAgent;
            let browser = 'Unknown';
            if (ua.includes('Firefox')) browser = 'FIREFOX';
            else if (ua.includes('Edg')) browser = 'EDGE';
            else if (ua.includes('Chrome')) browser = 'CHROME';
            else if (ua.includes('Safari')) browser = 'SAFARI';
            else if (ua.includes('Opera')) browser = 'OPERA';
            document.getElementById('deploy-log-browser').textContent = browser;

            // Resolution
            document.getElementById('deploy-log-resolution').textContent =
                window.screen.width + ' x ' + window.screen.height;

            // Timezone
            const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
            document.getElementById('deploy-log-timezone').textContent = tz || 'UTC';

            // Language
            document.getElementById('deploy-log-language').textContent =
                (navigator.language || 'EN').toUpperCase();
        }

        function initDeployment() {
            // Start at stage 1
            deployStage = 1;
            handleDeployStageEnter(1);
            startDeployTimer();

            // Continue prompt click
            document.getElementById('deploy-continue').addEventListener('click', () => {
                if (deployStage < 5) {
                    goToDeployStage(deployStage + 1);
                }
            });

            // Protocol items expand on click
            document.querySelectorAll('.deploy-protocol-item').forEach(item => {
                item.addEventListener('click', () => {
                    item.classList.toggle('expanded');
                });
            });

            // Enter headquarters button - show confirmation
            document.getElementById('deploy-enter-btn').addEventListener('click', () => {
                playStinger();
                document.getElementById('deploy-enter-btn').style.display = 'none';
                document.getElementById('deploy-final-confirm').classList.remove('hidden');
            });

            // Walk away button - hide confirmation
            document.getElementById('deploy-final-cancel').addEventListener('click', () => {
                document.getElementById('deploy-final-confirm').classList.add('hidden');
                document.getElementById('deploy-enter-btn').style.display = 'inline-block';
            });
        }

        // === SEEKER COUNT (Subtle Social Proof) ===
        function updateSeekerCount() {
            const base = 1200 + Math.floor(Math.random() * 100);
            document.getElementById('seeker-count').textContent = base.toLocaleString();
        }

        setInterval(updateSeekerCount, 10000);

        // === TEXT SCRAMBLE ANIMATION ===
        class TextScramble {
            constructor(el) {
                this.el = el;
                this.chars = '!<>-_\\/[]{}=+*^?#_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
                this.update = this.update.bind(this);
            }

            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise(resolve => this.resolve = resolve);
                this.queue = [];

                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    const start = Math.floor(Math.random() * 40);
                    const end = start + Math.floor(Math.random() * 40);
                    this.queue.push({ from, to, start, end });
                }

                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }

            update() {
                let output = '';
                let complete = 0;

                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i];

                    if (this.frame >= end) {
                        complete++;
                        output += to;
                    } else if (this.frame >= start) {
                        if (!char || Math.random() < 0.28) {
                            char = this.randomChar();
                            this.queue[i].char = char;
                        }
                        output += '<span class="scramble-char scrambling">' + char + '</span>';
                    } else {
                        output += from;
                    }
                }

                this.el.innerHTML = output;

                if (complete === this.queue.length) {
                    this.resolve();
                } else {
                    this.frameRequest = requestAnimationFrame(this.update);
                    this.frame++;
                }
            }

            randomChar() {
                return this.chars[Math.floor(Math.random() * this.chars.length)];
            }
        }

        function initTextScramble() {
            const elements = document.querySelectorAll('.scramble-text');
            let delay = 0;

            elements.forEach((el, index) => {
                const text = el.getAttribute('data-text');
                const scrambler = new TextScramble(el);

                setTimeout(() => {
                    scrambler.setText(text);
                }, delay);

                delay += 800;
            });

            // Also animate the source
            setTimeout(() => {
                const source = document.getElementById('epigraph-source');
                const sourceScrambler = new TextScramble(source);
                sourceScrambler.setText('- First Transmission, Day 0');
            }, delay + 500);
        }

        // === FAQ SHARE BUTTON ===
        document.getElementById('faq-share-btn').addEventListener('click', async () => {
            const shareData = {
                title: 'Can you decode this?',
                text: 'I found something. A signal in the noise. Can you see it?',
                url: window.location.href
            };

            try {
                if (navigator.share) {
                    await navigator.share(shareData);
                } else {
                    await navigator.clipboard.writeText(window.location.href);
                }
                document.getElementById('faq-share-btn').classList.add('hidden');
                document.getElementById('share-confirmation').classList.remove('hidden');
            } catch (err) {
                document.getElementById('faq-share-btn').classList.add('hidden');
                document.getElementById('share-confirmation').classList.remove('hidden');
            }
        });

        // === INIT ===
        document.addEventListener('DOMContentLoaded', () => {
            updateSeekerCount();
            initTextScramble();
        });

    })();
    </script>
</body>
</html>
