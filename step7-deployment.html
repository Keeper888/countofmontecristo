<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C.O.M. - Step 7</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#9670;</text></svg>">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Prevent FOUC - hide until loaded */
        body {
            opacity: 0;
            transition: opacity 0.4s ease-out;
        }

        body.loaded {
            opacity: 1;
        }

        .deploy-container {
            text-align: center;
            max-width: 600px;
        }

        .deploy-stage {
            display: none;
        }

        .deploy-stage.active {
            display: block;
            animation: fadeIn 1s ease-out;
        }

        /* Rotating Sigil Squares */
        .deploy-sigil-squares {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 40px;
        }

        .sigil-square {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid var(--accent);
            opacity: 0.3;
        }

        .sigil-square:nth-child(1) {
            width: 100%;
            height: 100%;
            animation: rot 20s linear infinite;
        }

        .sigil-square:nth-child(2) {
            width: 70%;
            height: 70%;
            animation: rot 15s linear infinite reverse;
        }

        .sigil-square:nth-child(3) {
            width: 45%;
            height: 45%;
            animation: rot 10s linear infinite;
        }

        .sigil-square:nth-child(4) {
            width: 25%;
            height: 25%;
            animation: rot 7s linear infinite reverse;
        }

        .sigil-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            background: var(--accent);
            border-radius: 50%;
            box-shadow: 0 0 20px var(--accent);
        }

        @keyframes rot {
            from {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        /* Stage 1: Quote */
        .deploy-quote {
            font-family: 'EB Garamond', serif;
            font-size: 1.8rem;
            color: var(--text);
            margin-bottom: 20px;
            font-style: italic;
        }

        .deploy-subquote {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--dim);
            margin-bottom: 50px;
            letter-spacing: 1px;
        }

        .deploy-enter-btn {
            padding: 18px 50px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            letter-spacing: 3px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .deploy-enter-btn:hover {
            background: var(--accent);
            color: var(--black);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.4);
        }

        /* Stage 2: Timer + Link */
        .deploy-timer {
            font-family: 'JetBrains Mono', monospace;
            font-size: 4rem;
            color: var(--red);
            letter-spacing: 4px;
            text-shadow: 0 0 30px rgba(139, 0, 0, 0.5);
            margin-bottom: 15px;
        }

        .deploy-timer-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--dim);
            letter-spacing: 3px;
            margin-bottom: 50px;
        }

        .deploy-telegram-link {
            display: inline-block;
            padding: 18px 50px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            letter-spacing: 3px;
            text-decoration: none;
            transition: all 0.3s;
        }

        .deploy-telegram-link:hover {
            background: var(--accent);
            color: var(--black);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.4);
        }
    </style>
</head>

<body>
    <div id="phase-deployment" class="phase">
        <div class="deploy-container">

            <!-- Stage 1: Sigil Animation + Quote + Enter Button -->
            <div class="deploy-stage active" id="stage-1">
                <div class="deploy-sigil-squares">
                    <div class="sigil-square"></div>
                    <div class="sigil-square"></div>
                    <div class="sigil-square"></div>
                    <div class="sigil-square"></div>
                    <div class="sigil-center"></div>
                </div>

                <div class="deploy-quote">"What you seek is seeking you."</div>
                <div class="deploy-subquote">Beyond this point, there is no observer. Only participant.</div>
                <button class="deploy-enter-btn" id="enter-btn">ENTER THE THRESHOLD</button>
            </div>

            <!-- Stage 2: Timer + Telegram -->
            <div class="deploy-stage" id="stage-2">
                <div class="deploy-timer" id="timer">23:59:47</div>
                <div class="deploy-timer-label">YOU HAVE 24 HOURS TO CHOOSE.</div>
                <a href="https://t.me/+ciVswQgySAJjOWM0" class="deploy-telegram-link" target="_blank">PROCEED TO
                    CHANNEL</a>
            </div>

        </div>
    </div>

    <script>
        // Audio Context
        let audioCtx = null;
        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playTick() {
            initAudio();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.frequency.value = 800;
            osc.type = 'sine';
            gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.05);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.05);
        }

        // Timer logic
        let hours = 23, mins = 59, secs = 47;

        function updateTimer() {
            secs--;
            if (secs < 0) { secs = 59; mins--; }
            if (mins < 0) { mins = 59; hours--; }
            if (hours < 0) { hours = 0; mins = 0; secs = 0; }

            const timeStr = String(hours).padStart(2, '0') + ':' +
                String(mins).padStart(2, '0') + ':' +
                String(secs).padStart(2, '0');

            document.getElementById('timer').textContent = timeStr;
            playTick();
        }

        // Enter button click
        document.getElementById('enter-btn').addEventListener('click', () => {
            initAudio(); // Initialize audio on user interaction
            document.getElementById('stage-1').classList.remove('active');
            document.getElementById('stage-2').classList.add('active');

            // Start timer
            setInterval(updateTimer, 1000);
        });

        // Reveal page once loaded
        window.addEventListener('load', () => {
            document.body.classList.add('loaded');
        });
    </script>
</body>

</html>